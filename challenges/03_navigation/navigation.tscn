[gd_scene load_steps=10 format=3 uid="uid://d3d2lkddidxcl"]

[ext_resource type="TileSet" uid="uid://dkvmyh3ie358w" path="res://infrastructure/grid/grid_tileset.tres" id="1_jok7y"]
[ext_resource type="PackedScene" uid="uid://buatvxdvveuad" path="res://infrastructure/mrg/mr_g.tscn" id="2_wdmes"]
[ext_resource type="Script" path="res://challenges/03_navigation/navigation.gd" id="3_ftd2k"]
[ext_resource type="Script" path="res://infrastructure/ui/challenge_item.gd" id="5_bvn5c"]
[ext_resource type="PackedScene" uid="uid://c16yxy0kb4wcw" path="res://infrastructure/ui/challenge_text.tscn" id="6_au4me"]
[ext_resource type="PackedScene" uid="uid://cyl8j7q7nqiag" path="res://infrastructure/ui/ui.tscn" id="8_kqry4"]
[ext_resource type="PackedScene" path="res://items/turn_left_sign.tscn" id="8_qf244"]
[ext_resource type="PackedScene" path="res://items/plant.tscn" id="9_0hcsi"]
[ext_resource type="PackedScene" path="res://items/turn_right_sign.tscn" id="10_e0vns"]

[node name="Navigation" type="Node2D"]

[node name="World" type="TileMap" parent="." groups=["world"]]
position = Vector2(-64, -64)
tile_set = ExtResource("1_jok7y")
format = 2
layer_0/tile_data = PackedInt32Array(65537, 4, 0, 65540, 4, 0, 65538, 4, 0, 131073, 4, 0, 131074, 4, 0, 131075, 4, 0, 131076, 4, 0, 65539, 4, 0, 196609, 4, 0, 262145, 4, 0, 327681, 4, 0, 393217, 4, 0, 196610, 4, 0, 262146, 4, 0, 327682, 4, 0, 393218, 4, 0, 196611, 4, 0, 262147, 4, 0, 327683, 4, 0, 393219, 4, 0, 196612, 3, 0, 262148, 3, 0, 327684, 3, 0, 393220, 4, 0, 65541, 4, 0, 131077, 4, 0, 196613, 3, 0, 262149, 4, 0, 393221, 4, 0, 65542, 4, 0, 131078, 4, 0, 196614, 3, 0, 262150, 3, 0, 327686, 3, 0, 393222, 4, 0, 65543, 4, 0, 131079, 4, 0, 196615, 4, 0, 262151, 4, 0, 327687, 4, 0, 393223, 4, 0, 458759, 4, 0, 458758, 4, 0, 458757, 4, 0, 458756, 4, 0, 458755, 4, 0, 458754, 4, 0, 458753, 4, 0, 327685, 4, 0, 1, 4, 0, 2, 4, 0, 3, 4, 0, 4, 4, 0, 5, 4, 0, 6, 4, 0, 7, 4, 0, 8, 4, 0, 65544, 4, 0, 131080, 4, 0, 196616, 4, 0, 262152, 4, 0, 327688, 4, 0, 393224, 4, 0, 458760, 4, 0, 524289, 4, 0, 524290, 4, 0, 524291, 4, 0, 524292, 4, 0, 524293, 4, 0, 524294, 4, 0, 524295, 4, 0, 524296, 4, 0, 9, 4, 0, 65545, 4, 0, 131081, 4, 0, 196617, 4, 0, 262153, 4, 0, 327689, 4, 0, 393225, 4, 0, 458761, 4, 0, 524297, 4, 0)
metadata/_edit_lock_ = true

[node name="Mr G" parent="." instance=ExtResource("2_wdmes")]
position = Vector2(126, 131)
script = ExtResource("3_ftd2k")

[node name="--CHALLENGES--" type="Node2D" parent="."]
metadata/_edit_lock_ = true

[node name="Challenge 1" type="Node2D" parent="--CHALLENGES--" groups=["challenge"]]
visible = false
position = Vector2(256, 512)
script = ExtResource("5_bvn5c")
metadata/_edit_lock_ = true

[node name="ChallengeText" parent="--CHALLENGES--/Challenge 1" instance=ExtResource("6_au4me")]
offset_left = 745.0
offset_top = -505.0
offset_right = 1237.0
offset_bottom = 515.0
text = "Mr.G now wants to learn navigating on his own with only a little bit of help. We have some new items \"Turn Left Sign\" and \"Turn Right Sign\". 

Write a program that lets Mr. G walk forward until he either has a \"Turn Left Sign\" or \"Turn Right Sign\" before him. Then he should turn depending on which kind of sign he sees.

Let Mr. G find a way to the plant simply by following the signs.

Hint: You can use the `item_name` property of the `item_before_me` to find out if we have a \"Turn Left Sign\" or \"Turn Right Sign\". Maybe write yourself a helper function to return the name of the item before you to simplify your code.  You can also try to use a different path than the one given. If you need more signs, you can drag in new signs from the `items` folder in the file system view."
metadata/_edit_lock_ = true

[node name="Line2D" type="Line2D" parent="--CHALLENGES--/Challenge 1"]
points = PackedVector2Array(0, -384, 0, 256, 384, 256, 384, 128)
metadata/_edit_lock_ = true

[node name="Challenge 2" type="Node2D" parent="--CHALLENGES--" groups=["challenge"]]
visible = false
position = Vector2(256, 512)
script = ExtResource("5_bvn5c")
metadata/_edit_lock_ = true

[node name="ChallengeText" parent="--CHALLENGES--/Challenge 2" instance=ExtResource("6_au4me")]
offset_left = 720.0
offset_top = -291.0
offset_right = 1212.0
offset_bottom = 276.0
text = "In the video we created a `TallyCounter` class to count items.

Give Mr. G a tally counter and let him count the steps he needs to reach the plant. When Mr.G arrives at the plant, he should say how many steps he has taken.

Hint: In case you didn't follow along with the video, you can find the source code for the `TallyCounter` class in the `solutions.md` file. "
metadata/_edit_lock_ = true

[node name="Challenge 3" type="Node2D" parent="--CHALLENGES--" groups=["challenge"]]
position = Vector2(256, 512)
script = ExtResource("5_bvn5c")
metadata/_edit_lock_ = true

[node name="ChallengeText" parent="--CHALLENGES--/Challenge 3" instance=ExtResource("6_au4me")]
offset_left = 764.0
offset_top = -449.0
offset_right = 1320.0
offset_bottom = 417.0
text = "Now Mr. G wants to take it a bit more slowly. So every 3 steps he should now take a break and admire the view. He could say  \"Taking a break.\" to indicate that he's currently taking a break.

When Mr. G arrives at the plant, he should still say how many steps he has taken.

Hint: You can give more than one counter to Mr. G. The counter has a `reset` function which we didn't use in the video but which might come in handy here. There is also the `%` operator which can calculate a remainder of an integer division. For example:

`1 % 3 == 1`
`2 % 3 == 2`
`3 % 3 == 0`

Maybe you could use this to solve this problem with only a single counter?"

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="Control" parent="CanvasLayer" instance=ExtResource("8_kqry4")]
metadata/_edit_lock_ = true

[node name="TurnLeftSign" parent="." instance=ExtResource("8_qf244")]
position = Vector2(252, 899)

[node name="Plant" parent="." instance=ExtResource("9_0hcsi")]
position = Vector2(640, 517)

[node name="Turn Right Sign" parent="." instance=ExtResource("10_e0vns")]
position = Vector2(386, 119)

[node name="TurnLeftSign2" parent="." instance=ExtResource("8_qf244")]
position = Vector2(762, 763)

[connection signal="finished" from="Mr G" to="CanvasLayer/Control" method="on_robot_finished"]
[connection signal="step_started" from="Mr G" to="CanvasLayer/Control" method="on_step_started"]
